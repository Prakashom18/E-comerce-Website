<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #fef3e7; /* light soft orange */
      color: #333;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .profile-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .edit-profile {
      padding: 10px 16px;
      background: linear-gradient(45deg, #10b981, #34d399);
      color: white;
      font-weight: 600;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.3s;
    }
    .edit-profile:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }

    .cart-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: linear-gradient(45deg, #f97316, #fb923c);
      color: white;
      font-weight: 600;
      border-radius: 12px;
      margin: 15px 0;
      text-decoration: none;
      transition: all 0.3s;
    }
    .cart-link img {
      width: 22px;
      height: 22px;
    }
    .cart-link:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }

    h2 a {
      color: #ea580c;
      font-weight: 600;
      transition: color 0.3s;
    }
    h2 a:hover {
      color: #fb923c;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    li {
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      background: #fef9f4;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s;
    }
    li:hover {
      background: #fff3e0;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }

    .order-status.pending {
      color: #f97316;
      font-weight: 600;
    }
    .order-status.completed {
      color: #10b981;
      font-weight: 600;
    }

    .logout-button {
      padding: 12px 20px;
      background: linear-gradient(45deg, #ef4444, #dc2626);
      color: white;
      font-weight: 600;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 15px;
    }
    .logout-button:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="profile-header">
      <h1 class="text-3xl font-bold text-orange-700">User Profile</h1>
      <a href="/profile/edit" class="edit-profile">Edit Profile</a>
    </div>

    <p class="mb-2"><strong>Username:</strong> <%= user.username %></p>
    <p class="mb-4"><strong>Email:</strong> <%= user.email %></p>

    <a href="/cart" class="cart-link">
      <img src="https://media.istockphoto.com/id/1206806317/vector/shopping-cart-icon-isolated-on-white-background.jpg?s=612x612&w=0&k=20&c=1RRQJs5NDhcB67necQn1WCpJX2YMfWZ4rYi1DFKlkNA=" alt="Cart">
      Your Cart
    </a>


    <h2 class="text-xl font-semibold mt-4 mb-2">Order History</h2>
    <ul>
      <% if (user.orderHistory.length > 0) { %>
        <% user.orderHistory.forEach(order => { %>
          <li>
            <div>
              <strong>Order ID:</strong> <%= order._id %><br>
              <strong>Payment Status:</strong> <%= order.paymentStatus %>
            </div>
            <span class="order-status <%= order.status === 'Pending' ? 'pending' : 'completed' %>">
              <%= order.status %>
            </span>
          </li>
        <% }) %>
      <% } else { %>
        <li>No orders found.</li>
      <% } %>
    </ul>

    <h2 class="text-xl font-semibold mt-6 mb-2">Pending Orders</h2>
    <ul>
      <% const pendingOrders = user.orderHistory.filter(order => order.status === 'Pending'); %>
      <% if (pendingOrders.length > 0) { %>
        <% pendingOrders.forEach(order => { %>
          <li>
            <div>
              <strong>Order ID:</strong> <%= order._id %><br>
              <strong>Payment Status:</strong> <%= order.paymentStatus %>
            </div>
            <span class="order-status pending"><%= order.status %></span>
          </li>
        <% }) %>
      <% } else { %>
        <li>No pending orders.</li>
      <% } %>
    </ul>

    <form action="/logout" method="POST">
      <button type="submit" class="logout-button">Logout</button>
    </form>
  </div>
</body>
</html>
